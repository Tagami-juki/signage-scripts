<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Welcome Board — Retro Pixel</title>
<meta name="description" content="Retro pixel welcome board for digital signage (Mario-like vibes without using Nintendo IP).">
<style>
  /* ---------- Reset & Base ---------- */
  html,body{height:100%;margin:0;background:#0b1220;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,"Noto Sans JP","Hiragino Kaku Gothic ProN","Yu Gothic UI",sans-serif}
  *{box-sizing:border-box}
  :root{
    /* Colors (customizable via query string) */
    --sky-1:#1b2d6b;
    --sky-2:#3a67d7;
    --ground-top:#7c4a1e;
    --ground-mid:#5e3412;
    --ground-btm:#3c200b;
    --brick:#b0562b;
    --brick-shade:#8e3d1c;
    --coin:#ffd64d;
    --coin-shade:#e0b12f;
    --accent:#ffcb05;
    --primary:#ffffff;
    --shadow:rgba(0,0,0,.35);

    /* Layout */
    --safe-pad: min(3vw, 24px);
    --content-max: 1600px;

    /* Pixel scale for hero & blocks */
    --px: 4px;

    /* Animation speeds */
    --cloud-speed: 60s;
    --walk-speed: .6s;
    --coin-every: 4.5s;
  }

  /* ---------- Stage ---------- */
  .stage{
    position:relative; inset:0;
    width:100vw; height:100vh; overflow:hidden;
    background: linear-gradient(to bottom, var(--sky-2), var(--sky-1) 65%);
  }

  /* Far mountains (simple parallax silhouettes) */
  .mountains{
    position:absolute; left:0; right:0; bottom:22vh; height:22vh; opacity:.45; filter:blur(.5px);
    background:
      radial-gradient(120vh 28vh at 10% 100%, #16224f 60%, transparent 61%) 0 100%/50% 100% no-repeat,
      radial-gradient(120vh 28vh at 60% 100%, #16224f 60%, transparent 61%) 0 100%/60% 100% no-repeat,
      radial-gradient(120vh 28vh at 100% 100%, #16224f 60%, transparent 61%) 0 100%/50% 100% no-repeat;
  }

  /* Clouds */
  .clouds{
    position:absolute; left:-20vw; right:-20vw; top:10vh; height:30vh; pointer-events:none;
    background:
      /* big */
      radial-gradient(16vh 10vh at 15% 40%, #fff 60%, transparent 61%),
      radial-gradient(12vh 8vh  at 20% 55%, #fff 60%, transparent 61%),
      radial-gradient(14vh 8vh  at 28% 48%, #fff 60%, transparent 61%),
      /* mid */
      radial-gradient(10vh 6vh  at 55% 35%, #fff 60%, transparent 61%),
      radial-gradient(9vh  6vh  at 60% 42%, #fff 60%, transparent 61%),
      radial-gradient(8vh  5vh  at 65% 38%, #fff 60%, transparent 61%),
      /* small */
      radial-gradient(8vh  5vh  at 80% 65%, #fff 60%, transparent 61%),
      radial-gradient(7vh  4vh  at 86% 62%, #fff 60%, transparent 61%);
    opacity:.9; animation: drift var(--cloud-speed) linear infinite;
  }
  .clouds.slow{ top:6vh; height:24vh; opacity:.6; animation-duration: calc(var(--cloud-speed) * 1.6); filter:blur(.3px); }

  @keyframes drift{ from{ transform:translateX(0) } to{ transform:translateX(20vw) } }

  /* Ground */
  .ground{
    position:absolute; left:0; right:0; bottom:0; height:28vh;
    background:
      /* top soil edge */
      linear-gradient(#2a1608 0 6%, transparent 6%),
      /* checker dirt */
      repeating-linear-gradient(45deg, var(--ground-mid) 0 14px, var(--ground-btm) 14px 28px);
    box-shadow: inset 0 8px 0 0 rgba(0,0,0,.35);
  }
  .ground::before{
    /* grass top with "pixel" edge */
    content:"";
    position:absolute; left:0; right:0; top:-12px; height:18px;
    background:
      linear-gradient(#7acb3f, #4aa61d),
      linear-gradient(90deg, #2f7d12 50%, transparent 0) 0 14px/8px 4px repeat-x;
  }

  /* Brick platform row (for hero to stand on) */
  .bricks{
    position:absolute; left:0; right:0; bottom:20vh; height:8vh; display:flex; gap:0;
    justify-content:center;
  }
  .brick{
    width:5.2vh; height:5.2vh; margin:0 .4vh;
    background:
      linear-gradient(var(--brick) 0 100%);
    box-shadow:
      inset -6px -6px 0 0 var(--brick-shade),
      inset  6px  6px 0 0 rgba(255,255,255,.08),
      0 8px 0 0 rgba(0,0,0,.45);
    border:2px solid #55230f; border-radius:4px;
  }
  /* Question block */
  .q{ position:relative; }
  .q::after{
    content:"?";
    position:absolute; inset:0; display:grid; place-items:center;
    font-weight:900; font-size:3vh; color:#fbe79b; text-shadow:2px 2px 0 #6a4b11;
  }
  .q.hit{ animation: bop .28s ease-out }
  @keyframes bop{ 0%{ transform:translateY(0) } 30%{ transform:translateY(-10%) } 100%{ transform:translateY(0) } }

  /* ---------- Message Panel ---------- */
  .hud{
    position:absolute; left:var(--safe-pad); right:var(--safe-pad); top:var(--safe-pad);
    display:flex; align-items:center; justify-content:space-between; gap:1rem;
    max-width:var(--content-max); margin-inline:auto;
  }
  .logo{
    font-weight:900; letter-spacing:.02em; padding:.35rem .6rem; border-radius:8px;
    background:rgba(0,0,0,.25); box-shadow:0 4px 0 rgba(0,0,0,.25), 0 0 0 3px rgba(255,255,255,.08) inset;
  }
  .clock{ font-variant-numeric:tabular-nums; opacity:.9 }

  .message{
    position:absolute; left:50%; transform:translateX(-50%); top:28vh;
    width:min(92vw, var(--content-max));
    display:grid; gap:1.2vh; text-align:center; padding:1.2rem 1.6rem;
  }
  .message .small{ font-weight:700; opacity:.9; text-shadow:0 2px 0 rgba(0,0,0,.4) }
  .message .big{ font-weight:900; line-height:1.06; text-shadow:0 4px 0 rgba(0,0,0,.45) }

  /* Responsive text sizes using viewport min */
  .small{ font-size: clamp(16px, 2.2vmin, 24px) }
  .big{   font-size: clamp(28px, 6.4vmin, 64px) }

  /* ---------- Pixel Hero (original, license‑safe) ---------- */
  .heroWrap{
    position:absolute; bottom:20vh; left:50%; transform:translateX(-50%);
    width: calc(var(--px) * 32); height: calc(var(--px) * 32);
    image-rendering: pixelated; filter: drop-shadow(0 12px 0 var(--shadow));
  }
  /* 2-frame walk cycle by swapping visibility */
  .heroWrap svg{ width:100%; height:100% }
  .f2{ animation: showhide var(--walk-speed) steps(1,end) infinite }
  @keyframes showhide{
    0%{ opacity:0 } 50%{ opacity:0 } 50.01%{ opacity:1 } 100%{ opacity:1 }
  }
  /* Gentle bob to feel alive */
  .heroWrap{ animation: bob 1.2s ease-in-out infinite }
  @keyframes bob{ 0%,100%{ transform:translate(-50%,0) } 50%{ transform:translate(-50%,-2%) } }

  /* ---------- Coins ---------- */
  .coin{
    position:absolute; width:3.2vh; height:3.2vh; border-radius:50%;
    background: radial-gradient(120% 100% at 30% 30%, #fff8 0 18%, transparent 19%),
                linear-gradient(145deg, var(--coin) 0 60%, var(--coin-shade) 100%);
    border:3px solid #7a560f; box-shadow:0 6px 0 rgba(0,0,0,.45), inset 0 -2px 0 #fff4;
    transform-origin:center;
    animation: floatUp 1.2s ease-out forwards;
  }
  @keyframes floatUp{
    0%{ transform:translateY(0) scale(0.2); opacity:0 }
    10%{ opacity:1 }
    60%{ transform:translateY(-5vh) scale(1.05) }
    100%{ transform:translateY(-8.5vh) scale(.9); opacity:0 }
  }

  /* ---------- Footer banner ---------- */
  .footer{
    position:absolute; left:var(--safe-pad); right:var(--safe-pad); bottom:var(--safe-pad);
    display:flex; align-items:center; justify-content:center; gap:1rem; text-align:center;
    padding:.8rem 1rem; border-radius:12px;
    background: linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.45));
    box-shadow:0 10px 0 rgba(0,0,0,.35), inset 0 0 0 2px rgba(255,255,255,.08);
    backdrop-filter: blur(2px);
  }
  .footer b{ color:var(--accent) }
</style>
</head>
<body>
  <div class="stage" id="stage">
    <div class="mountains"></div>
    <div class="clouds slow"></div>
    <div class="clouds"></div>

    <div class="hud">
      <div class="logo" id="logo">WELCOME</div>
      <div class="clock" id="clock">--:--</div>
    </div>

    <!-- Main message -->
    <div class="message">
      <div class="small" id="msgSmall">ご来社ありがとうございます</div>
      <div class="big" id="msgBig">ようこそ <span id="guest">LEVEL6</span> 様</div>
    </div>

    <!-- Brick row -->
    <div class="bricks" id="bricks">
      <div class="brick"></div>
      <div class="brick"></div>
      <div class="brick q" id="q1"></div>
      <div class="brick"></div>
      <div class="brick"></div>
      <div class="brick"></div>
    </div>

    <!-- Hero (original pixel art; two animation frames) -->
    <div class="heroWrap" aria-hidden="true">
      <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
        <!-- Frame 1 -->
        <g class="f1">
          <!-- hat -->
          <rect x="10" y="4" width="12" height="4" fill="#e23d2b"/>
          <rect x="9" y="8" width="14" height="3" fill="#e23d2b"/>
          <!-- face -->
          <rect x="11" y="11" width="10" height="7" fill="#f6c09b"/>
          <!-- body -->
          <rect x="10" y="18" width="12" height="7" fill="#2b6cf0"/>
          <!-- left arm down -->
          <rect x="7" y="18" width="3" height="7" fill="#2b6cf0"/>
          <!-- right arm down -->
          <rect x="22" y="18" width="3" height="7" fill="#2b6cf0"/>
          <!-- left leg -->
          <rect x="10" y="25" width="5" height="5" fill="#61331a"/>
          <!-- right leg -->
          <rect x="17" y="25" width="5" height="5" fill="#61331a"/>
          <!-- eyes -->
          <rect x="13" y="12" width="2" height="2" fill="#000"/>
          <rect x="17" y="12" width="2" height="2" fill="#000"/>
          <!-- moustache (generic) -->
          <rect x="12" y="14" width="8" height="1" fill="#3b2314"/>
        </g>
        <!-- Frame 2 -->
        <g class="f2">
          <!-- hat -->
          <rect x="10" y="4" width="12" height="4" fill="#e23d2b"/>
          <rect x="9" y="8" width="14" height="3" fill="#e23d2b"/>
          <!-- face -->
          <rect x="11" y="11" width="10" height="7" fill="#f6c09b"/>
          <!-- body -->
          <rect x="10" y="18" width="12" height="7" fill="#2b6cf0"/>
          <!-- arms swinging -->
          <rect x="6" y="19" width="4" height="6" fill="#2b6cf0"/>
          <rect x="22" y="17" width="4" height="8" fill="#2b6cf0"/>
          <!-- legs step -->
          <rect x="9" y="26" width="6" height="4" fill="#61331a"/>
          <rect x="17" y="25" width="6" height="5" fill="#61331a"/>
          <!-- eyes -->
          <rect x="13" y="12" width="2" height="2" fill="#000"/>
          <rect x="17" y="12" width="2" height="2" fill="#000"/>
          <!-- moustache -->
          <rect x="12" y="14" width="8" height="1" fill="#3b2314"/>
        </g>
      </svg>
    </div>

    <div class="ground"></div>

    <div class="footer">
      <span id="footerText">本日のご来社、心より歓迎いたします。</span>
    </div>
  </div>

<script>
  // --------- Utility: URL Params -> config ---------
  const params = new URLSearchParams(location.search);
  const $ = s => document.querySelector(s);

  // Texts
  const guest = params.get("guest") || params.get("name") || "LEVEL6";
  const org   = params.get("org")   || params.get("company") || "";
  const small = params.get("small") || (org? `${org} の皆さま` : "ご来社ありがとうございます");
  const big   = params.get("big")   || `ようこそ ${guest} 様`;
  $("#guest").textContent = guest;
  $("#msgSmall").textContent = small;
  $("#msgBig").textContent   = big;
  $("#logo").textContent     = (params.get("logo") || "WELCOME").toUpperCase();
  $("#footerText").textContent = params.get("footer") || "本日のご来社、心より歓迎いたします。";

  // Colors (hex or CSS color names)
  const setIf = (cssVar, p) => { const v = params.get(p); if(v) document.documentElement.style.setProperty(cssVar, v) };
  setIf("--sky-1","sky1"); setIf("--sky-2","sky2");
  setIf("--accent","accent"); setIf("--primary","primary");
  setIf("--brick","brick"); setIf("--coin","coin");

  // Clock
  const clockEl = $("#clock");
  const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || "Asia/Tokyo";
  const tick = ()=>{
    const d = new Date();
    clockEl.textContent = d.toLocaleString('ja-JP',{hour:'2-digit',minute:'2-digit',second:'2-digit'});
    requestAnimationFrame(()=>{});
  };
  setInterval(tick, 1000); tick();

  // Coins popping from question block
  const q = $("#q1");
  function spawnCoin(){
    const coin = document.createElement("div");
    coin.className = "coin";
    // position coin above the question block
    const r = q.getBoundingClientRect();
    const s = $("#stage").getBoundingClientRect();
    const left = r.left - s.left + r.width/2 - (r.height*0.32);
    const top  = r.top  - s.top - r.height*0.2;
    coin.style.left = left+"px";
    coin.style.top  = top+"px";
    $("#stage").appendChild(coin);
    q.classList.add("hit");
    setTimeout(()=>q.classList.remove("hit"), 280);
    setTimeout(()=>coin.remove(), 1200);
  }
  // Spawn periodically
  setInterval(spawnCoin, Number(params.get("coinEveryMs")) || 4500);
  // First coin after a short delay
  setTimeout(spawnCoin, 1000);

  // Optional: simple WebAudio "bleep" (no external audio, safe)
  const audioOK = params.get("sound") === "1";
  if(audioOK){
    const ctx = new (window.AudioContext||window.webkitAudioContext)();
    const beep = ()=>{
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type = "square"; o.frequency.value = 880;
      g.gain.value = 0.02;
      o.connect(g); g.connect(ctx.destination);
      o.start();
      setTimeout(()=>{o.frequency.value=1320},80);
      setTimeout(()=>{o.stop()},160);
    };
    // hook into coin spawns
    const origSpawn = spawnCoin.bind(this);
    window.spawnCoin = ()=>{ origSpawn(); beep(); };
  }

  // Accessibility: hide cursor for kiosks (optional ?nocursor=1)
  if(params.get("nocursor")==="1"){ document.body.style.cursor="none" }

  // Safety note in console
  console.log("%cRetro pixel welcome board", "color:#ffcb05;font-weight:bold;font-size:14px");
  console.log("All graphics are original vector rectangles and CSS; no third-party IP used.");
</script>
</body>
</html>
